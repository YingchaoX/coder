# 00. 文档范围与定位

## 1. 产品一句话定义
Coder 是一个离线终端编码代理，形态是单二进制全屏 TUI。它通过模型调用 + 工具调用，在工作区内完成代码分析、修改、命令执行和任务拆分。

## 2. 本套需求文档回答的问题
- 这个工具现在是什么样子。
- 用户如何和它交互。
- 在什么条件下会触发什么行为。
- 每个能力目前具备到什么程度。
- 哪些地方已经实现，哪些地方仍是可细化需求。

## 3. 边界定义
- 运行形态：本地终端，Bubble Tea 全屏界面。
- 模型协议：OpenAI 兼容 Chat Completions（流式）。
- 文件边界：所有文件工具都受工作区路径约束。
- 命令能力：通过 `bash` 工具在工作区执行 shell 命令。
- 持久化：使用 SQLite，已支持会话、消息、todo、权限日志的数据模型。

## 4. 术语
- 回合（Turn）：一次用户输入到助手完成输出的完整过程。
- 工具调用（Tool Call）：模型返回 function call 后由本地执行。
- 审批（Approval）：策略为 `ask` 或命中风险规则时，执行前的确认动作。
- 复杂任务：通过长度、关键词、分隔符等启发式规则识别的任务。
- 自动验证：检测到代码编辑后自动运行测试/校验命令。

## 5. 版本基线说明
本需求基线来自当前仓库实现，主要入口链路：
- `cmd/agent/main.go`
- `internal/tui/app.go`
- `internal/orchestrator/orchestrator.go`
- `internal/tools/*.go`
